<!DOCTYPE html>
<html class="writer-html5" lang="fr" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../../img/favicon.ico" />
    <title>6. Hockey Application Version 2 - Android Programming</title>
    <link rel="stylesheet" href="../../css/theme.css" />
    <link rel="stylesheet" href="../../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/styles/github.min.css" />
        <link href="../../style.css" rel="stylesheet" />
        <link href="../../assets/mkdocs_puml/puml.css" rel="stylesheet" />
        <link href="../../assets/mkdocs_puml/interaction.css" rel="stylesheet" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "6. Hockey Application Version 2";
        var mkdocs_page_input_path = "2. Android/06-hockey-v2.md";
        var mkdocs_page_url = null;
      </script>
    
    <!--[if lt IE 9]>
      <script src="../../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.8.0/highlight.min.js"></script>
      <script>hljs.highlightAll();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href="../.." class="icon icon-home"> Android Programming
        </a>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../..">Android Programming</a>
                </li>
              </ul>
              <p class="caption"><span class="caption-text">1. Kotlin</span></p>
              <ul>
                  <li class="toctree-l1"><a class="reference internal" href="../../1.%20Kotlin/01-kotlin/">The Kotlin Programming Language</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../../1.%20Kotlin/02-kotlin-android/">Kotlin for Android</a>
                  </li>
              </ul>
              <p class="caption"><span class="caption-text">2. Android</span></p>
              <ul class="current">
                  <li class="toctree-l1"><a class="reference internal" href="../01-intro/">1. Introduction to Mobile and Android Programming</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../02-intro-compose/">2. Introduction to Jetpack Compose</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../03-premi%C3%A8re-app/">3. First Application with Jetpack Compose</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../03b-usb-wifi-debugging/">3.1 USB and Wifi debugging</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../04-hockey-v1/">4. Hockey Application Version 1</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../05-etats-evenements/">5. State and Event Management</a>
                  </li>
                  <li class="toctree-l1 current"><a class="reference internal current" href="#">6. Hockey Application Version 2</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#explanation-of-playerlistwithsearch">Explanation of PlayerListWithSearch</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#getplayers-function">getPlayers Function</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#playerlistwithsearch-composable">PlayerListWithSearch Composable</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#connections-between-textfield-mutablestateof-onvaluechange-and-getplayers">Connections between TextField, mutableStateOf, onValueChange, and getPlayers()</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#1-mutablestateof-and-composable-state">1. mutableStateOf and Composable State</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#2-textfield-and-onvaluechange">2. TextField and onValueChange</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#3-connection-with-getplayers">3. Connection with getPlayers()</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#4-data-flow-and-recomposition">4. Data Flow and Recomposition</a>
    </li>
        </ul>
    </li>
    </ul>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../07-orientation/">7. Screen Orientation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../08-hockey-v3/">8. Hockey Application Version 3</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../09-etats-evenements-v2/">9. State and Event Management</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../10-localisation/">10. Localization</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../11-json/">11. Reading and Writing JSON Files</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../12-cycle-de-vie/">12. Lifecycle and Architecture</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../13-architecture/">13. Architecture</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../14-navigation/">14. Navigation in Jetpack Compose</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../15-intentions/">15. Intents</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../16-intentions-vs-navigation/">16. Intents vs. Navigation</a>
                  </li>
                  <li class="toctree-l1"><a class="reference internal" href="../17-images-distantes/">17. Displaying Remote Images and Videos</a>
                  </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../..">Android Programming</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="../.." class="icon icon-home" aria-label="Docs"></a></li>
          <li class="breadcrumb-item">2. Android</li>
      <li class="breadcrumb-item active">6. Hockey Application Version 2</li>
    <li class="wy-breadcrumbs-aside">
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="6-hockey-application-version-2">6. Hockey Application Version 2<a class="headerlink" href="#6-hockey-application-version-2" title="Permanent link">&para;</a></h1>
<h2 id="explanation-of-playerlistwithsearch">Explanation of <code>PlayerListWithSearch</code><a class="headerlink" href="#explanation-of-playerlistwithsearch" title="Permanent link">&para;</a></h2>
<p>This new version adds a search functionality to the player list. Here&rsquo;s a detailed explanation of the modifications:</p>
<h3 id="getplayers-function"><code>getPlayers</code> Function<a class="headerlink" href="#getplayers-function" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kd">fun</span><span class="w"> </span><span class="nf">getPlayers</span><span class="p">(</span><span class="n">name</span><span class="p">:</span><span class="w"> </span><span class="kt">String?</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">null</span><span class="p">):</span><span class="w"> </span><span class="n">List</span><span class="o">&lt;</span><span class="n">Player</span><span class="o">&gt;</span><span class="w"> </span><span class="o">=</span><span class="w"></span>
<span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">name</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="kc">null</span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="n">getSamplePlayers</span><span class="p">()</span><span class="w"></span>
<span class="w">    </span><span class="k">else</span><span class="w"></span>
<span class="w">        </span><span class="n">getSamplePlayers</span><span class="p">().</span><span class="na">filter</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nb">it</span><span class="p">.</span><span class="na">name</span><span class="p">.</span><span class="na">lowercase</span><span class="p">().</span><span class="na">contains</span><span class="p">(</span><span class="n">name</span><span class="p">.</span><span class="na">lowercase</span><span class="p">())</span><span class="w"> </span><span class="p">}.</span><span class="na">toList</span><span class="p">()</span><span class="w"></span>
</code></pre></div>
<p>This function allows filtering the player list based on a search criterion:</p>
<ul>
<li>If <code>name</code> is <code>null</code>, it returns all players.</li>
<li>Otherwise, it filters the list to return only players whose name contains the search string (case-insensitive).</li>
</ul>
<h3 id="playerlistwithsearch-composable"><code>PlayerListWithSearch</code> Composable<a class="headerlink" href="#playerlistwithsearch-composable" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="nd">@Composable</span><span class="w"></span>
<span class="kd">fun</span><span class="w"> </span><span class="nf">PlayerListWithSearch</span><span class="p">(</span><span class="n">modifier</span><span class="p">:</span><span class="w"> </span><span class="n">Modifier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Modifier</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="kd">var</span><span class="w"> </span><span class="nv">searchCriteria</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">rememberSaveable</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">mutableStateOf</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="n">Column</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">TextField</span><span class="p">(</span><span class="w"></span>
<span class="w">            </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchCriteria</span><span class="p">,</span><span class="w"></span>
<span class="w">            </span><span class="n">onValueChange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">searchCriteria</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">it</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">            </span><span class="n">modifier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">modifier</span><span class="w"></span>
<span class="w">        </span><span class="p">)</span><span class="w"></span>
<span class="w">        </span><span class="n">LazyColumn</span><span class="p">(</span><span class="n">modifier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">modifier</span><span class="p">.</span><span class="na">fillMaxSize</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">            </span><span class="n">items</span><span class="p">(</span><span class="n">getPlayers</span><span class="p">(</span><span class="n">searchCriteria</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">                </span><span class="n">PlayerCard</span><span class="p">(</span><span class="n">player</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">it</span><span class="p">)</span><span class="w"></span>
<span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<p>This composable replaces <code>PlayerList</code> and adds search functionality:</p>
<ol type="1">
<li>
<p><code>searchCriteria</code>:</p>
<ul>
<li>Uses <code>rememberSaveable</code> to preserve the search state even during recompositions.</li>
<li><code>mutableStateOf("")</code> initializes the search value to an empty string.</li>
</ul>
</li>
<li>
<p><code>Column</code>:</p>
<ul>
<li>Vertically organizes the search field and player list.</li>
</ul>
</li>
<li>
<p><code>TextField</code>:</p>
<ul>
<li>Allows users to enter a search criterion.</li>
<li><code>value = searchCriteria</code> displays the current value.</li>
<li><code>onValueChange = { searchCriteria = it }</code> updates <code>searchCriteria</code> with each change.</li>
</ul>
</li>
<li>
<p><code>LazyColumn</code>:</p>
<ul>
<li>Similar to the previous version, but now uses <code>getPlayers(searchCriteria)</code>.</li>
<li>This dynamically filters the player list based on the search criterion.</li>
</ul>
</li>
<li>
<p><code>items</code>:</p>
<ul>
<li>Creates a <code>PlayerCard</code> for each filtered player.</li>
</ul>
</li>
</ol>
<p>This new version offers a more interactive user experience, allowing users to search for specific players in the list. The list updates automatically with each change in the search field text, thanks to the use of state (<code>searchCriteria</code>) and Jetpack Compose&rsquo;s automatic recomposition.</p>
<h2 id="connections-between-textfield-mutablestateof-onvaluechange-and-getplayers">Connections between <code>TextField</code>, <code>mutableStateOf</code>, <code>onValueChange</code>, and <code>getPlayers()</code><a class="headerlink" href="#connections-between-textfield-mutablestateof-onvaluechange-and-getplayers" title="Permanent link">&para;</a></h2>
<h3 id="1-mutablestateof-and-composable-state">1. <code>mutableStateOf</code> and Composable State<a class="headerlink" href="#1-mutablestateof-and-composable-state" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="kd">var</span><span class="w"> </span><span class="nv">searchCriteria</span><span class="w"> </span><span class="k">by</span><span class="w"> </span><span class="n">rememberSaveable</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">mutableStateOf</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span><span class="w"></span>
</code></pre></div>
<ul>
<li><code>mutableStateOf("")</code> creates a mutable state initialized with an empty string.</li>
<li><code>rememberSaveable</code> allows preserving this state even during recompositions or configuration changes.</li>
<li><code>by</code> is used to delegate the property, allowing direct access and modification of <code>searchCriteria</code>.</li>
</ul>
<h3 id="2-textfield-and-onvaluechange">2. <code>TextField</code> and <code>onValueChange</code><a class="headerlink" href="#2-textfield-and-onvaluechange" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">TextField</span><span class="p">(</span><span class="w"></span>
<span class="w">    </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">searchCriteria</span><span class="p">,</span><span class="w"></span>
<span class="w">    </span><span class="n">onValueChange</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">searchCriteria</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">it</span><span class="w"> </span><span class="p">},</span><span class="w"></span>
<span class="w">    </span><span class="n">modifier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">modifier</span><span class="w"></span>
<span class="p">)</span><span class="w"></span>
</code></pre></div>
<ul>
<li><code>value = searchCriteria</code>: The <code>TextField</code> displays the current value of <code>searchCriteria</code>.</li>
<li><code>onValueChange = { searchCriteria = it }</code>: When the user types in the field:<ul>
<li><code>it</code> represents the new field value.</li>
<li>This new value is assigned to <code>searchCriteria</code>.</li>
<li>This triggers a recomposition of the composable.</li>
</ul>
</li>
</ul>
<h3 id="3-connection-with-getplayers">3. Connection with <code>getPlayers()</code><a class="headerlink" href="#3-connection-with-getplayers" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="n">LazyColumn</span><span class="p">(</span><span class="n">modifier</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">modifier</span><span class="p">.</span><span class="na">fillMaxSize</span><span class="p">())</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">    </span><span class="n">items</span><span class="p">(</span><span class="n">getPlayers</span><span class="p">(</span><span class="n">searchCriteria</span><span class="p">))</span><span class="w"> </span><span class="p">{</span><span class="w"></span>
<span class="w">        </span><span class="n">PlayerCard</span><span class="p">(</span><span class="n">player</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">it</span><span class="p">)</span><span class="w"></span>
<span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="p">}</span><span class="w"></span>
</code></pre></div>
<ul>
<li><code>getPlayers(searchCriteria)</code> is called with the current value of <code>searchCriteria</code>.</li>
<li>Each time <code>searchCriteria</code> changes:<ul>
<li><code>getPlayers()</code> is recalled with the new value.</li>
<li>The player list is filtered based on this new value.</li>
<li><code>LazyColumn</code> recomposes with the new filtered list.</li>
</ul>
</li>
</ul>
<h3 id="4-data-flow-and-recomposition">4. Data Flow and Recomposition<a class="headerlink" href="#4-data-flow-and-recomposition" title="Permanent link">&para;</a></h3>
<ol type="1">
<li>The user types in the <code>TextField</code>.</li>
<li><code>onValueChange</code> is called, updating <code>searchCriteria</code>.</li>
<li>Updating <code>searchCriteria</code> triggers a recomposition.</li>
<li>During recomposition:<ul>
<li><code>TextField</code> displays the new value of <code>searchCriteria</code>.</li>
<li><code>getPlayers(searchCriteria)</code> is called with the new value.</li>
<li><code>LazyColumn</code> recomposes with the new filtered list.</li>
</ul>
</li>
</ol>
<p>This reactive architecture enables real-time updates of the user interface. Each keystroke in the search field triggers a chain of reactions that results in the filtered display of players, providing a smooth and reactive user experience.</p>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../05-etats-evenements/" class="btn btn-neutral float-left" title="5. State and Event Management"><span class="icon icon-circle-arrow-left"></span> Previous</a>
        <a href="../07-orientation/" class="btn btn-neutral float-right" title="7. Screen Orientation">Next <span class="icon icon-circle-arrow-right"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
    
      <span><a href="../05-etats-evenements/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
      <span><a href="../07-orientation/" style="color: #fcfcfc">Next &raquo;</a></span>
    
  </span>
</div>
    <script src="../../js/jquery-3.6.0.min.js"></script>
    <script>var base_url = "../..";</script>
    <script src="../../js/theme_extra.js"></script>
    <script src="../../js/theme.js"></script>
      <script src="../../javascripts/mathjax.js"></script>
      <script src="https://unpkg.com/mathjax@3/es5/tex-mml-chtml.js"></script>
      <script src="../../assets/mkdocs_puml/puml.js"></script>
      <script src="https://unpkg.com/@panzoom/panzoom@4.5.1/dist/panzoom.min.js"></script>
      <script src="../../assets/mkdocs_puml/interaction.js"></script>
    <script>
        jQuery(function () {
            SphinxRtdTheme.Navigation.enable(true);
        });
    </script>

</body>
</html>
